% Goldsmiths LaTeX styling - No emoji fonts version
% Save this as goldsmiths-style.tex

% Font setup with Unicode support but no emoji fonts
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}

% Better Unicode handling
\XeTeXlinebreaklocale "en"
\XeTeXlinebreakskip = 0pt plus 1pt

% Font selection with fallbacks - no emoji fonts
\IfFontExistsTF{Atkinson Hyperlegible}{
  \setmainfont{Atkinson Hyperlegible}[Scale=1.0]
}{
  \IfFontExistsTF{Inter}{
    \setmainfont{Inter}[Scale=1.0]
  }{
    \setmainfont{Helvetica Neue}[Scale=1.0]
  }
}

% Handle problematic emoji characters by replacing with text
\usepackage{newunicodechar}
\newunicodechar{ğŸ“§}{Email: }
\newunicodechar{ğŸ¢}{Office: }
\newunicodechar{ğŸ•}{Hours: }
\newunicodechar{ğŸ“…}{Date: }
\newunicodechar{ğŸ“}{Phone: }
\newunicodechar{ğŸŒ}{Website: }
\newunicodechar{ğŸ’»}{Tech: }
\newunicodechar{ğŸ“š}{Info: }
\newunicodechar{ğŸ“}{Note: }
\newunicodechar{ğŸ¯}{Goal: }
\newunicodechar{âœ…}{âœ“ }
\newunicodechar{âŒ}{âœ— }
\newunicodechar{âš }{Warning: }
\newunicodechar{ğŸ’š}{Support: }
\newunicodechar{ğŸ›Ÿ}{Help: }
\newunicodechar{ğŸ†˜}{SOS: }
\newunicodechar{ğŸ”}{Account: }
\newunicodechar{ğŸ”}{Search: }
\newunicodechar{ğŸ› }{Tools: }
\newunicodechar{ğŸ¥}{Video: }
\newunicodechar{ğŸš¨}{Alert: }
\newunicodechar{ğŸ¤–}{AI: }
\newunicodechar{ğŸš€}{Progress: }
\newunicodechar{ğŸ”„}{Resit: }
\newunicodechar{ğŸ‘¥}{People: }
\newunicodechar{ğŸ’ª}{Work: }
\newunicodechar{ğŸ‰}{Success: }

% Colors
\usepackage{xcolor}
\definecolor{goldblue}{HTML}{1E3A8A}
\definecolor{accentblue}{HTML}{3B82F6}
\definecolor{goldaccent}{HTML}{D97706}
\definecolor{navy}{HTML}{1E293B}
\definecolor{slate}{HTML}{475569}
\definecolor{lightslate}{HTML}{64748B}
\definecolor{borderlight}{HTML}{E2E8F0}
\definecolor{backgroundlight}{HTML}{F8FAFC}

% Page layout
\usepackage[margin=2.5cm]{geometry}
\usepackage{setspace}
\onehalfspacing

% Heading styling
\usepackage{titlesec}

% H1 styling with underline
\titleformat{\section}
  {\Large\bfseries\color{goldblue}}
  {}
  {0pt}
  {\Large\bfseries\color{goldblue}}
  [\vspace{4pt}{\color{goldaccent}\rule{\textwidth}{2pt}}]
\titlespacing*{\section}{0pt}{2em}{1em}

% H2 styling with left border
\titleformat{\subsection}
  {\large\bfseries\color{goldblue}}
  {}
  {0pt}
  {\colorbox{accentblue}{\makebox[4pt]{\strut}}\hspace{8pt}\large\bfseries\color{goldblue}}
\titlespacing*{\subsection}{0pt}{1.5em}{0.8em}

% H3 styling
\titleformat{\subsubsection}
  {\normalsize\bfseries\color{slate}}
  {}
  {0pt}
  {\normalsize\bfseries\color{slate}}
\titlespacing*{\subsubsection}{0pt}{1.2em}{0.6em}

% Custom boxes
\usepackage{tcolorbox}
\tcbuselibrary{breakable}

% Define custom environments that match your CSS classes
\newenvironment{infobox}{\begin{tcolorbox}[
  colback=backgroundlight,
  colframe=accentblue,
  leftrule=3pt,
  rightrule=0pt,
  toprule=1pt,
  bottomrule=1pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=12pt,
  bottom=12pt,
  breakable
]}{\end{tcolorbox}}

\newenvironment{warningbox}{\begin{tcolorbox}[
  colback=white,
  colframe=red,
  leftrule=3pt,
  rightrule=0pt,
  toprule=1pt,
  bottomrule=1pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=12pt,
  bottom=12pt,
  breakable
]}{\end{tcolorbox}}

\newenvironment{successbox}{\begin{tcolorbox}[
  colback=backgroundlight,
  colframe=green,
  leftrule=3pt,
  rightrule=0pt,
  toprule=1pt,
  bottomrule=1pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=12pt,
  bottom=12pt,
  breakable
]}{\end{tcolorbox}}

\newenvironment{highlightbox}{\begin{tcolorbox}[
  colback=white,
  colframe=goldaccent,
  leftrule=3pt,
  rightrule=0pt,
  toprule=1pt,
  bottomrule=1pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=12pt,
  bottom=12pt,
  breakable
]}{\end{tcolorbox}}

\newenvironment{contactcard}{\begin{tcolorbox}[
  colback=white,
  colframe=borderlight,
  toprule=3pt,
  colframe=goldblue,
  arc=3pt,
  left=16pt,
  right=16pt,
  top=16pt,
  bottom=16pt,
  breakable,
  drop shadow
]}{\end{tcolorbox}}

% Links
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=accentblue,
  urlcolor=accentblue,
  citecolor=accentblue,
  pdfborder={0 0 0},
  unicode=true
}

% Lists with colored bullets
\usepackage{enumitem}
\setlist[itemize]{label={\color{goldaccent}\textbullet}, leftmargin=2em, itemsep=2pt}
\setlist[enumerate]{leftmargin=2em, itemsep=2pt}

% Table styling
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{colortbl}
\renewcommand{\arraystretch}{1.3}

% Better table headers
\newcommand{\tableheader}[1]{\rowcolor{goldblue}\textcolor{white}{\textbf{#1}}}

% Code blocks
\usepackage{listings}
\lstset{
  backgroundcolor=\color{backgroundlight},
  frame=single,
  framerule=0.5pt,
  rulecolor=\color{borderlight},
  basicstyle=\small\ttfamily\color{goldblue},
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  columns=flexible,
  aboveskip=12pt,
  belowskip=12pt,
  inputencoding=utf8,
  extendedchars=true
}

% Inline code styling
\newcommand{\inlinecode}[1]{\colorbox{backgroundlight}{\texttt{\color{goldblue}\small{#1}}}}

% Redefine emphasis to use colors
\let\oldemph\emph
\renewcommand{\emph}[1]{\textcolor{slate}{\textit{#1}}}

\let\oldtextbf\textbf  
\renewcommand{\textbf}[1]{\textcolor{goldblue}{\textbf{#1}}}

% Quote/blockquote styling
\renewenvironment{quote}
{\begin{tcolorbox}[
  colback=white,
  colframe=goldaccent,
  leftrule=3pt,
  rightrule=0pt,
  toprule=0pt,
  bottomrule=0pt,
  arc=0pt,
  left=12pt,
  right=0pt,
  top=6pt,
  bottom=6pt,
  breakable
]\color{slate}\itshape}
{\end{tcolorbox}}

% Page headers/footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\color{lightslate}\small\textit{Foundation in Psychology Programme}}
\fancyhead[R]{\color{lightslate}\small\textit{Goldsmiths, University of London}}
\fancyfoot[C]{\color{lightslate}\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\headrule}{\hbox to\headwidth{\color{borderlight}\leaders\hrule height \headrulewidth\hfill}}

% Spacing improvements
\usepackage{parskip}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
\setlength{\parindent}{0pt}

% Error handling for unknown characters
\tracinglostchars=2
